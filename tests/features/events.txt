Feature: Events 

  Scenario: Event with the barista occurs
    Given I am at the location "in the Cloud Forest Cafe"
    When I wait until the event "The barista is in a dark corner" occurs
    Then the event "The barista is in a dark corner" should be initialized
    And the picture should change
    And I should see "The barista is in a dark corner phoning a friend. You overhear parts of the conversation: 'I'm tired of pushing coffee. I just want a beer, but I'm stuck here for like 5 more hours... Man, I tell you if someone would just bring me a beer...'"
  
  Scenario: The event with the barista occurs only once during the game
    Given I am at the location "in the Cloud Forest Cafe"
    And I wait until the event "The barista is in a dark corner" occurs
    And the event "The barista is in a dark corner" should be initialized
    When I choose to "Wait" repeatedly
    Then I should not see the event message "The barista is in a dark corner"
   
 
  Scenario: Barista event does not occur when waiting in non-cafe locations.
    Given I am on the "<location>"
    When I choose to "Wait" repeatedly
    Then I should not see the event message "The barista is in a dark corner"

    Examples:
      | location                       |                                                                                                                                                                                     |
      | ------------------------------ |                                                                  
      | outside the Cloud Forest Cafe  |                                                                                          
      | on an empty street             |                                                                                                       
      | in a crowded bar               |                                                        
      | in the country-side            |                                                                              
      | A guitarist and a sax player   |  



 Scenario: Jam with the band event occurs
    Given I am at the location "A guitarist and a sax player"
    When I wait until the event "jam with us?" occurs
    Then the event "jam with us?" should be initialized
    And I should see the text "The guitarist shouts out to you: 'You look like a hip kid, why don't you come on up and jam with us?'"
    And the button "Jam with the band" should be visible

  Scenario: Jam with the band event occurs only once during the game
    Given I am at the location "A guitarist and a sax player"
    And I wait until the event "jam with us?" occurs
    And the event "am with us?" should be initialized
    When I choose to "Wait" repeatedly
    Then I should not see the event message "jam with us?"


  Scenario: Jam with the band event does not occur when waiting in non-concert locations.
    Given I am on the "<location>"
    When I choose to "Wait" repeatedly
    Then I should not see the event message "jam with us?"

    Examples:
      | location                       |                                                                                                                                                                                     |
      | ------------------------------ |                                                                  
      | outside the Cloud Forest Cafe  |                                                                                          
      | on an empty street             |                                                                                                       
      | in a crowded bar               |                                                        
      | in the country-side            |                                                                              
      | in the Cloud Forest Cafe |

  Scenario: A can of beer for free event occurs
    Given I am at the location "in a crowded bar"
    When I wait until the event "a can of beer for free" occurs
    Then the event "a can of beer for free" should be initialized
    And I should see the text "The bartender offers you a can of beer for free... 'Come on... Get into the groove... You can pay me for the next one!'"
    And the value of my "bag" should be "a can of beer"


  Scenario: A can of beer for free event occurs only once during the game
    Given I am at the location "in a crowded bar"
    And I wait until the event "a can of beer for free" occurs
    And the event "a can of beer for free" should be initialized
    When I choose to "Wait" repeatedly
    Then I should not see the event message "a can of beer for free"


  Scenario: Jam with the band event does not occur when waiting in non-bar locations.
    Given I am on the "<location>"
    When I choose to "Wait" repeatedly
    Then I should not see the event message "a can of beer for free"
    Examples:
      | location                       |                                                                                                                                                                                     |
      | ------------------------------ |                                                                  
      | outside the Cloud Forest Cafe  |                                                                                          
      | on an empty street             |                                                                                                       
      | in the Cloud Forest Cafe       |
      | in the country-side            |                                                                              
      | A guitarist and a sax player   |

